{% extends 'base.html.twig' %}

{% block title %}Dashboard Admin{% endblock %}

{% block body %}
{% include 'admin/_navbar.html.twig' %}

<div class="container py-4">
    <h2 class="mb-4 text-center">Tableau de bord - ADMIN</h2>

    <div class="row text-center">
        <div class="col-md-2 mb-3">
            <div class="card shadow-sm p-3">
                <h6>Total Agents</h6>
                <h3>{{ stats.total_agents }}</h3>
            </div>
        </div>
        <div class="col-md-2 mb-3">
            <div class="card shadow-sm p-3">
                <h6>Agents Actifs</h6>
                <h3>{{ stats.active_agents }}</h3>
            </div>
        </div>
        <div class="col-md-2 mb-3">
            <div class="card shadow-sm p-3">
                <h6>Shifts ce mois</h6>
                <h3>{{ stats.total_shifts }}</h3>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card shadow-sm p-3">
                <h6>Heures Totales</h6>
                <h3>{{ stats.total_hours }}h</h3>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card shadow-sm p-3">
                <h6>Salaire Total</h6>
                <h3>‚Ç¨{{ stats.total_salary }}</h3>
            </div>
        </div>
    </div>
</div>
<hr class="my-5">

<h3>üïí Activit√©s r√©centes</h3>
<ul class="list-group mb-5">
    {% for s in recentActivities %}
        <li class="list-group-item">
            <strong>{{ s.agent.firstName }} {{ s.agent.lastName }}</strong>
            ‚Äî Shift {{ s.status|lower }} ({{ s.site.name }})
            <br>
            <small class="text-muted">
                {{ s.shiftDate|date("d/m/Y") }} ‚Ä¢ {{ s.startTime|date("H:i") }}
            </small>
        </li>
    {% else %}
        <li class="list-group-item text-muted">Aucune activit√© r√©cente.</li>
    {% endfor %}
</ul>

<h3>‚ö†Ô∏è Alertes</h3>
<ul class="list-group mb-5">
    <li class="list-group-item">
        {{ alerts.unassigned }} shifts non assign√©s pour demain
    </li>
    <li class="list-group-item">
        {{ alerts.late_agents }} agents potentiellement en retard
    </li>
    <li class="list-group-item">
        Rapport mensuel disponible
    </li>
</ul>

<h3>üè¢ Aper√ßu des Sites</h3>
<div class="row">
    {% for site in sites %}
        <div class="col-md-4 mb-3">
            <div class="card shadow p-3">
                <h5>{{ site.name }}</h5>
                <p>üëÆ {{ site.agents }} agents</p>
                <p>{{ site.hours }}</p>
            </div>
        </div>
    {% endfor %}
</div>

{% endblock %}
