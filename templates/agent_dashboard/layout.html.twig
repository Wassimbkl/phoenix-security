{% extends 'base.html.twig' %}

{% block body %}
<!-- Sidebar Agent -->
<aside class="sidebar">
    <div class="sidebar-brand">
        <div class="sidebar-brand-icon">üîê</div>
        <div class="sidebar-brand-text">
            Phoenix Security
            <small>Espace Agent</small>
        </div>
    </div>
    
    <nav class="sidebar-menu">
        <div class="sidebar-menu-title">Mon espace</div>
        
        <a href="{{ path('agent_dashboard') }}" class="sidebar-link {{ app.request.get('_route') == 'agent_dashboard' ? 'active' : '' }}">
            <i class="bi bi-house-door-fill"></i>
            <span>Accueil</span>
        </a>
        
        <a href="{{ path('agent_planning') }}" class="sidebar-link {{ app.request.get('_route') == 'agent_planning' ? 'active' : '' }}">
            <i class="bi bi-calendar3"></i>
            <span>Mon planning</span>
        </a>
        
        <a href="{{ path('agent_payments') }}" class="sidebar-link {{ app.request.get('_route') == 'agent_payments' ? 'active' : '' }}">
            <i class="bi bi-credit-card-2-front-fill"></i>
            <span>Mes paiements</span>
        </a>
        
        <a href="{{ path('agent_profile') }}" class="sidebar-link {{ app.request.get('_route') == 'agent_profile' ? 'active' : '' }}">
            <i class="bi bi-person-circle"></i>
            <span>Mon profil</span>
        </a>
    </nav>
    
    <div class="sidebar-user">
        <div class="sidebar-user-info">
            <div class="sidebar-user-avatar">
                {{ agent.firstName|first|upper }}{{ agent.lastName|first|upper }}
            </div>
            <div>
                <div class="sidebar-user-name">{{ agent.firstName }} {{ agent.lastName }}</div>
                <div class="sidebar-user-role">Agent</div>
            </div>
            <a href="{{ path('app_logout') }}" class="ms-auto text-white-50" title="D√©connexion">
                <i class="bi bi-box-arrow-right"></i>
            </a>
        </div>
    </div>
</aside>

<!-- Main Content -->
<main class="main-content">
    <!-- Top Navbar -->
    <header class="top-navbar">
        <div>
            <button class="btn btn-link d-lg-none p-0 me-3" onclick="toggleSidebar()">
                <i class="bi bi-list fs-4"></i>
            </button>
            <h1 class="page-title d-inline-block align-middle">
                {% block page_title %}Mon espace{% endblock %}
                <small>{% block page_subtitle %}{% endblock %}</small>
            </h1>
        </div>
        <div class="d-flex align-items-center gap-3">
            <span class="text-muted small">{{ "now"|date("d/m/Y") }}</span>
        </div>
    </header>
    
    <!-- Content -->
    <div class="content-area">
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ label }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endfor %}
        
        {% block content %}{% endblock %}
    </div>
</main>
{% endblock %}
